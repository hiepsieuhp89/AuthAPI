{"ast":null,"code":"import _slicedToArray from \"D:\\\\ReactJS\\\\AuthApi2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\ReactJS\\\\AuthApi2\\\\src\\\\app\\\\pages\\\\custom-pages\\\\CoursePages\\\\product-edit\\\\ProductEdit.js\";\n\n/* eslint-disable no-script-url,jsx-a11y/anchor-is-valid,jsx-a11y/role-supports-aria-props */\nimport React, { useEffect, useState, useRef } from \"react\"; // import { useDispatch } from \"react-redux\";\n// import * as actions from \"../../../_redux/products/productsActions\";\n\nimport { Card, CardBody, CardHeader, CardHeaderToolbar } from \"../../../../../_metronic/_partials/controls\";\nimport { ProductEditForm } from \"./ProductEditForm\";\nimport { useSubheader } from \"../../../../../_metronic/layout\";\nimport { ModalProgressBar } from \"../../../../../_metronic/_partials/controls\";\nimport { Toast } from 'react-bootstrap';\nvar initProduct = {\n  id: undefined,\n  name: \"\",\n  username: \"\",\n  password: \"\",\n  year: 2021,\n  actor: \"\"\n};\nexport function ProductEdit(_ref) {\n  var history = _ref.history,\n      id = _ref.match.params.id;\n  // Subheader\n  var suhbeader = useSubheader(); // Product for edit\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      productForEdit = _useState2[0],\n      setProductForEdit = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      actionsLoading = _useState4[0],\n      setActionsLoading = _useState4[1]; // Validate Errors\n\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      messages = _useState6[0],\n      setMessages = _useState6[1]; // Tabs\n\n\n  var _useState7 = useState(\"basic\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tab = _useState8[0],\n      setTab = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      title = _useState10[0],\n      setTitle = _useState10[1];\n\n  useEffect(function () {\n    if (id) fetch(\"\".concat(process.env.REACT_APP_WEBSERVER_API_URL, \"/course/\").concat(id)).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      setProductForEdit(result);\n    });\n    setActionsLoading(false);\n  }, [id]);\n  useEffect(function () {\n    var _title = id ? \"\" : \"New Course\";\n\n    if (productForEdit && id) {\n      _title = \"Edit course ' \".concat(productForEdit.code, \" - \").concat(productForEdit.name, \" - \").concat(productForEdit.year, \" - \").concat(productForEdit.actor, \" '\");\n    }\n\n    setTitle(_title);\n    suhbeader.setTitle(_title); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productForEdit, id]); // \n  // \n  // \n  //create course\n\n  function createCourse(course) {\n    console.log(\"course creating: \");\n    console.log(course);\n    fetch(\"\".concat(process.env.REACT_APP_WEBSERVER_API_URL, \"/course\"), {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(course)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      if (!result.status) {\n        setMessages([{\n          message: \"Tạo khóa học không thành công\",\n          variant: \"danger\"\n        }]);\n      } else {\n        console.log(\"created course: \");\n        console.log(course);\n        setMessages([{\n          message: \"Tạo khóa học thành công\",\n          variant: \"success\"\n        }]);\n        backToProductsList();\n      }\n    });\n  } // \n  // \n  // \n  //update a course\n\n\n  function updateCourse(course) {\n    console.log(\"course updating: \");\n    console.log(course);\n    fetch(\"\".concat(process.env.REACT_APP_WEBSERVER_API_URL, \"/course\"), {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(course)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      if (!result.status) {\n        setMessages([{\n          message: \"Sửa khóa học không thành công\",\n          variant: \"danger\"\n        }]);\n      } else {\n        console.log(\"updated course: \");\n        console.log(course);\n        setMessages([{\n          message: \"Sửa khóa học thành công\",\n          variant: \"success\"\n        }]);\n        backToProductsList();\n      }\n    });\n  } // \n  // \n  // \n  //trigger submit button\n\n\n  var saveProduct = function saveProduct(values) {\n    if (!id) // Add course \n      createCourse(values);else // Update course\n      updateCourse(values);\n  };\n\n  var btnRef = useRef();\n\n  var saveProductClick = function saveProductClick() {\n    if (btnRef && btnRef.current) {\n      btnRef.current.click();\n    }\n  };\n\n  var backToProductsList = function backToProductsList() {\n    history.push(\"/courses\");\n  };\n\n  function ShowAlert(props) {\n    // useEffect(() => {\n    // })\n    return /*#__PURE__*/React.createElement(Toast, {\n      show: props.show,\n      delay: 3000,\n      autohide: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, \"Woohoo, you're reading this text in a Toast!\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ShowAlert, {\n    show: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, actionsLoading && /*#__PURE__*/React.createElement(ModalProgressBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    title: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeaderToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: backToProductsList,\n    className: \"btn btn-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-arrow-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }), \"Back\"), \"  \", /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary ml-2\",\n    onClick: saveProductClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, \"Save\"))), /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"nav nav-tabs nav-tabs-line \",\n    role: \"tablist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: function onClick() {\n      return setTab(\"basic\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link \".concat(tab === \"basic\" && \"active\"),\n    \"data-toggle\": \"tab\",\n    role: \"tab\",\n    \"aria-selected\": (tab === \"basic\").toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, \"Basic info\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, tab === \"basic\" && /*#__PURE__*/React.createElement(ProductEditForm, {\n    validate_errors: messages || [],\n    actionsLoading: actionsLoading,\n    product: productForEdit || initProduct,\n    btnRef: btnRef,\n    saveProduct: saveProduct,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  })))));\n}","map":{"version":3,"sources":["D:/ReactJS/AuthApi2/src/app/pages/custom-pages/CoursePages/product-edit/ProductEdit.js"],"names":["React","useEffect","useState","useRef","Card","CardBody","CardHeader","CardHeaderToolbar","ProductEditForm","useSubheader","ModalProgressBar","Toast","initProduct","id","undefined","name","username","password","year","actor","ProductEdit","history","match","params","suhbeader","productForEdit","setProductForEdit","actionsLoading","setActionsLoading","messages","setMessages","tab","setTab","title","setTitle","fetch","process","env","REACT_APP_WEBSERVER_API_URL","then","res","json","result","_title","code","createCourse","course","console","log","method","headers","body","JSON","stringify","status","message","variant","backToProductsList","updateCourse","saveProduct","values","btnRef","saveProductClick","current","click","push","ShowAlert","props","show","toString"],"mappings":"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","sourcesContent":["/* eslint-disable no-script-url,jsx-a11y/anchor-is-valid,jsx-a11y/role-supports-aria-props */\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\n// import { useDispatch } from \"react-redux\";\r\n// import * as actions from \"../../../_redux/products/productsActions\";\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  CardHeaderToolbar,\r\n} from \"../../../../../_metronic/_partials/controls\";\r\nimport { ProductEditForm } from \"./ProductEditForm\";\r\nimport { useSubheader } from \"../../../../../_metronic/layout\";\r\nimport { ModalProgressBar } from \"../../../../../_metronic/_partials/controls\";\r\nimport {Toast} from 'react-bootstrap';\r\n\r\nconst initProduct = {\r\n  id: undefined,\r\n  name: \"\",\r\n  username: \"\",\r\n  password: \"\",\r\n  year: 2021,\r\n  actor: \"\",\r\n};\r\n\r\nexport function ProductEdit({\r\n  history,\r\n  match: {\r\n    params: { id },\r\n  },\r\n}) {\r\n  // Subheader\r\n  const suhbeader = useSubheader();\r\n\r\n  // Product for edit\r\n  const [productForEdit, setProductForEdit] = useState({});\r\n  const [actionsLoading, setActionsLoading] = useState(true);\r\n\r\n  // Validate Errors\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  // Tabs\r\n  const [tab, setTab] = useState(\"basic\");\r\n  const [title, setTitle] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if(id)\r\n      fetch(`${process.env.REACT_APP_WEBSERVER_API_URL}/course/${id}`)\r\n      .then(res => res.json()).then((result) => {\r\n        setProductForEdit(result);\r\n      });\r\n    setActionsLoading(false);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    let _title = id ? \"\" : \"New Course\";\r\n    if (productForEdit && id) {\r\n      _title = `Edit course ' ${productForEdit.code} - ${productForEdit.name} - ${productForEdit.year} - ${productForEdit.actor} '`;\r\n    }\r\n    setTitle(_title);\r\n    suhbeader.setTitle(_title);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [productForEdit, id]);\r\n\r\n  // \r\n  // \r\n  // \r\n  //create course\r\n  function createCourse(course){\r\n    console.log(\"course creating: \")\r\n    console.log(course)\r\n    fetch(`${process.env.REACT_APP_WEBSERVER_API_URL}/course`,{\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(course)\r\n    })\r\n    .then(res => res.json()).then((result) => {\r\n      if(!result.status){\r\n        setMessages([{message:\"Tạo khóa học không thành công\", variant:\"danger\"}])\r\n      }\r\n      else{\r\n        console.log(\"created course: \")\r\n        console.log(course)\r\n        setMessages([{message:\"Tạo khóa học thành công\", variant:\"success\"}])\r\n        backToProductsList()\r\n      }\r\n    })\r\n  }\r\n  // \r\n  // \r\n  // \r\n  //update a course\r\n  function updateCourse(course){\r\n    console.log(\"course updating: \")\r\n    console.log(course)\r\n    fetch(`${process.env.REACT_APP_WEBSERVER_API_URL}/course`,{\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(course)\r\n    })\r\n    .then(res => res.json()).then((result) => {\r\n      if(!result.status){\r\n        setMessages([{message:\"Sửa khóa học không thành công\", variant:\"danger\"}])\r\n      }\r\n      else{\r\n        console.log(\"updated course: \")\r\n        console.log(course)\r\n        setMessages([{message:\"Sửa khóa học thành công\", variant:\"success\"}])\r\n        backToProductsList()\r\n      }\r\n    })\r\n  }\r\n\r\n  // \r\n  // \r\n  // \r\n  //trigger submit button\r\n  const saveProduct = (values) => {\r\n    if (!id)// Add course \r\n      createCourse(values)\r\n    else// Update course\r\n      updateCourse(values)\r\n  };\r\n\r\n  const btnRef = useRef();\r\n  const saveProductClick = () => {\r\n    if (btnRef && btnRef.current) {\r\n      btnRef.current.click();\r\n    }\r\n  };\r\n\r\n  const backToProductsList = () => {\r\n    history.push(`/courses`);\r\n  };\r\n  function ShowAlert(props){\r\n\r\n    // useEffect(() => {\r\n      \r\n    // })\r\n    return (\r\n    <Toast show={props.show} delay={3000} autohide>\r\n      <Toast.Body>Woohoo, you're reading this text in a Toast!</Toast.Body>\r\n    </Toast>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ShowAlert show={false}/>\r\n      <Card>\r\n        {actionsLoading && <ModalProgressBar />}\r\n        <CardHeader title={title}>\r\n          <CardHeaderToolbar>\r\n            <button\r\n              type=\"button\"\r\n              onClick={backToProductsList}\r\n              className=\"btn btn-light\"\r\n            >\r\n              <i className=\"fa fa-arrow-left\"></i>\r\n              Back\r\n            </button>\r\n            {`  `}\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-primary ml-2\"\r\n              onClick={saveProductClick}\r\n            >\r\n              Save\r\n            </button>\r\n          </CardHeaderToolbar>\r\n        </CardHeader>\r\n        <CardBody>\r\n          <ul className=\"nav nav-tabs nav-tabs-line \" role=\"tablist\">\r\n            <li className=\"nav-item\" onClick={() => setTab(\"basic\")}>\r\n              <a\r\n                className={`nav-link ${tab === \"basic\" && \"active\"}`}\r\n                data-toggle=\"tab\"\r\n                role=\"tab\"\r\n                aria-selected={(tab === \"basic\").toString()}\r\n              >\r\n                Basic info\r\n              </a>\r\n            </li>\r\n          </ul>\r\n          <div className=\"mt-5\">\r\n            {tab === \"basic\" && (\r\n              <ProductEditForm\r\n                validate_errors={messages || []}\r\n                actionsLoading={actionsLoading}\r\n                product={productForEdit || initProduct}\r\n                btnRef={btnRef}\r\n                saveProduct={saveProduct}\r\n              />\r\n            )}\r\n          </div>\r\n        </CardBody>\r\n      </Card>\r\n    </div>\r\n    \r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}